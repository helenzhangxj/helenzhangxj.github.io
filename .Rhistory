arrange(item, desc(value)) %>%
group_by(item) %>%
mutate(n = row_number()) %>%
ggplot(aes(x= fct_reorder(symbol, desc(n)), y = value)) +
geom_bar(stat = 'identity') +
scale_y_continuous(labels = scales::label_number_si(accuracy = 2)) +
coord_flip() +
facet_wrap(~item, scales = 'free_x')
ticker_other_stat %>%
select(-return_annual_sd) %>%
inner_join(symbol_load %>%
transmute(symbol, company_name, a_market_cap = market_cap,
b_last_annual_dividend = last_annual_dividend,
rowid,
row_group),
by = 'symbol') %>%
mutate(symbol_name = paste0(symbol, '_', company_name)) %>%
pivot_longer(cols = c(starts_with('return'), 'a_market_cap','b_last_annual_dividend'), names_to = 'item') %>%
filter(row_group == 0) %>%
arrange(item, desc(value)) %>%
group_by(item) %>%
mutate(n = row_number()) %>%
ggplot(aes(x= fct_reorder(symbol, desc(n)), y = value)) +
geom_bar(stat = 'identity') +
scale_y_continuous(labels = scales::label_number_si(accuracy = 0.01)) +
coord_flip() +
facet_wrap(~item, scales = 'free_x')
ticker_other_stat %>%
select(-return_annual_sd) %>%
inner_join(symbol_load %>%
transmute(symbol, company_name, a_market_cap = market_cap,
b_last_annual_dividend = last_annual_dividend,
rowid,
row_group),
by = 'symbol') %>%
mutate(symbol_name = paste0(symbol, '_', company_name)) %>%
pivot_longer(cols = c(starts_with('return'), 'a_market_cap','b_last_annual_dividend'), names_to = 'item') %>%
filter(row_group == 1) %>%
arrange(item, desc(value)) %>%
group_by(item) %>%
mutate(n = row_number()) %>%
ggplot(aes(x= fct_reorder(symbol, desc(n)), y = value)) +
geom_bar(stat = 'identity') +
scale_y_continuous(labels = scales::label_number_si(accuracy = 0.01)) +
coord_flip() +
facet_wrap(~item, scales = 'free_x')
ticker_other_stat %>%
filter(aes(return_annual_mean>0)) %>%
select(-return_annual_sd) %>%
inner_join(symbol_load %>%
transmute(symbol, company_name, a_market_cap = market_cap,
b_last_annual_dividend = last_annual_dividend,
rowid,
row_group),
by = 'symbol') %>%
mutate(symbol_name = paste0(symbol, '_', company_name)) %>%
pivot_longer(cols = c(starts_with('return'), 'a_market_cap','b_last_annual_dividend'), names_to = 'item') %>%
# filter(row_group == 1) %>%
arrange(item, desc(value)) %>%
group_by(item) %>%
mutate(n = row_number()) %>%
ggplot(aes(x= fct_reorder(symbol, desc(n)), y = value)) +
geom_bar(stat = 'identity') +
scale_y_continuous(labels = scales::label_number_si(accuracy = 0.01)) +
coord_flip() +
facet_wrap(~item, scales = 'free_x')
ticker_other_stat %>%
filter(aes(return_annual_mean>0))
ticker_other_stat
ticker_other_stat %>%
filter(return_annual_mean>0) %>%
select(-return_annual_sd) %>%
inner_join(symbol_load %>%
transmute(symbol, company_name, a_market_cap = market_cap,
b_last_annual_dividend = last_annual_dividend,
rowid,
row_group),
by = 'symbol') %>%
mutate(symbol_name = paste0(symbol, '_', company_name)) %>%
pivot_longer(cols = c(starts_with('return'), 'a_market_cap','b_last_annual_dividend'), names_to = 'item') %>%
# filter(row_group == 1) %>%
arrange(item, desc(value)) %>%
group_by(item) %>%
mutate(n = row_number()) %>%
ggplot(aes(x= fct_reorder(symbol, desc(n)), y = value)) +
geom_bar(stat = 'identity') +
scale_y_continuous(labels = scales::label_number_si(accuracy = 0.01)) +
coord_flip() +
facet_wrap(~item, scales = 'free_x')
ticker_other_stat %>%
filter(return_annual_mean>0 & return_annual_median >0) %>%
select(-return_annual_sd) %>%
inner_join(symbol_load %>%
transmute(symbol, company_name, a_market_cap = market_cap,
b_last_annual_dividend = last_annual_dividend,
rowid,
row_group),
by = 'symbol') %>%
mutate(symbol_name = paste0(symbol, '_', company_name)) %>%
pivot_longer(cols = c(starts_with('return'), 'a_market_cap','b_last_annual_dividend'), names_to = 'item') %>%
# filter(row_group == 1) %>%
arrange(item, desc(value)) %>%
group_by(item) %>%
mutate(n = row_number()) %>%
ggplot(aes(x= fct_reorder(symbol, desc(n)), y = value)) +
geom_bar(stat = 'identity') +
scale_y_continuous(labels = scales::label_number_si(accuracy = 0.01)) +
coord_flip() +
facet_wrap(~item, scales = 'free_x')
ticker_other_stat %>%
filter(return_annual_mean>0 & return_annual_median >0) %>%
select(-return_annual_sd) %>%
inner_join(symbol_load %>%
transmute(symbol, company_name, a_market_cap = market_cap,
b_last_annual_dividend = last_annual_dividend,
rowid,
row_group),
by = 'symbol') %>%
mutate(symbol_name = paste0(symbol, '_', company_name)) %>%
pivot_longer(cols = c(starts_with('return'), 'a_market_cap','b_last_annual_dividend'), names_to = 'item') %>%
# filter(row_group == 1) %>%
arrange(item, desc(value)) %>%
group_by(item) %>%
mutate(n = row_number()) %>%
mutate(symbol = reorder_within(symbol, n, item))
ticker_other_stat %>%
filter(return_annual_mean>0 & return_annual_median >0) %>%
select(-return_annual_sd) %>%
inner_join(symbol_load %>%
transmute(symbol, company_name, a_market_cap = market_cap,
b_last_annual_dividend = last_annual_dividend,
rowid,
row_group),
by = 'symbol') %>%
mutate(symbol_name = paste0(symbol, '_', company_name)) %>%
pivot_longer(cols = c(starts_with('return'), 'a_market_cap','b_last_annual_dividend'), names_to = 'item') %>%
# filter(row_group == 1) %>%
arrange(item, desc(value)) %>%
group_by(item) %>%
mutate(n = row_number())
ticker_other_stat %>%
filter(return_annual_mean>0 & return_annual_median >0) %>%
select(-return_annual_sd) %>%
inner_join(symbol_load %>%
transmute(symbol, company_name, a_market_cap = market_cap,
b_last_annual_dividend = last_annual_dividend,
rowid,
row_group),
by = 'symbol') %>%
mutate(symbol_name = paste0(symbol, '_', company_name)) %>%
pivot_longer(cols = c(starts_with('return'), 'a_market_cap','b_last_annual_dividend'), names_to = 'item') %>%
# filter(row_group == 1) %>%
arrange(item, desc(value)) %>%
group_by(item) %>%
mutate(n = row_number()) %>%
mutate(symbol = reorder_within(symbol, by = n, within = item))
ticker_other_stat %>%
filter(return_annual_mean>0 & return_annual_median >0) %>%
select(-return_annual_sd) %>%
inner_join(symbol_load %>%
transmute(symbol, company_name, a_market_cap = market_cap,
b_last_annual_dividend = last_annual_dividend,
rowid,
row_group),
by = 'symbol') %>%
mutate(symbol_name = paste0(symbol, '_', company_name)) %>%
pivot_longer(cols = c(starts_with('return'), 'a_market_cap','b_last_annual_dividend'), names_to = 'item') %>%
# filter(row_group == 1) %>%
arrange(item, desc(value)) %>%
mutate(n = row_number(), item = as.factor(item)) %>%
mutate(symbol = reorder_within(symbol, by = n, within = item))
?reorder_within
ticker_other_stat %>%
filter(return_annual_mean>0 & return_annual_median >0) %>%
select(-return_annual_sd) %>%
inner_join(symbol_load %>%
transmute(symbol, company_name, a_market_cap = market_cap,
b_last_annual_dividend = last_annual_dividend,
rowid,
row_group),
by = 'symbol') %>%
mutate(symbol_name = paste0(symbol, '_', company_name)) %>%
pivot_longer(cols = c(starts_with('return'), 'a_market_cap','b_last_annual_dividend'), names_to = 'item') %>%
# filter(row_group == 1) %>%
arrange(item, desc(value)) %>%
mutate(n = row_number(), item = as.factor(item)) %>%
mutate(symbol = reorder_within(symbol, by = n, within = item))
ggplot(aes(x= fct_reorder(symbol, desc(n)), y = value)) +
geom_bar(stat = 'identity') +
scale_y_continuous(labels = scales::label_number_si(accuracy = 0.01)) +
coord_flip() +
scale_x_reordered() +
facet_wrap(~item, scales = 'free_x')
ticker_other_stat %>%
filter(return_annual_mean>0 & return_annual_median >0) %>%
select(-return_annual_sd) %>%
inner_join(symbol_load %>%
transmute(symbol, company_name, a_market_cap = market_cap,
b_last_annual_dividend = last_annual_dividend,
rowid,
row_group),
by = 'symbol') %>%
mutate(symbol_name = paste0(symbol, '_', company_name)) %>%
pivot_longer(cols = c(starts_with('return'), 'a_market_cap','b_last_annual_dividend'), names_to = 'item') %>%
# filter(row_group == 1) %>%
arrange(item, desc(value)) %>%
mutate(n = row_number(), item = as.factor(item)) %>%
mutate(symbol = reorder_within(symbol, by = n, within = item)) %>%
ggplot(aes(x= fct_reorder(symbol, desc(n)), y = value)) +
geom_bar(stat = 'identity') +
scale_y_continuous(labels = scales::label_number_si(accuracy = 0.01)) +
coord_flip() +
scale_x_reordered() +
facet_wrap(~item, scales = 'free_x')
ticker_other_stat %>%
filter(return_annual_mean>0 & return_annual_median >0) %>%
select(-return_annual_sd) %>%
inner_join(symbol_load %>%
transmute(symbol, company_name, a_market_cap = market_cap,
b_last_annual_dividend = last_annual_dividend,
rowid,
row_group),
by = 'symbol') %>%
mutate(symbol_name = paste0(symbol, '_', company_name)) %>%
pivot_longer(cols = c(starts_with('return'), 'a_market_cap','b_last_annual_dividend'), names_to = 'item') %>%
# filter(row_group == 1) %>%
group_by(item) %>%
arrange(desc(value)) %>%
ungroup() %>%
mutate(n = row_number(),
item = as.factor(item)) %>%
mutate(symbol = reorder_within(symbol, by = n, within = item)) %>%
ggplot(aes(x= fct_reorder(symbol, desc(n)), y = value)) +
geom_bar(stat = 'identity') +
scale_y_continuous(labels = scales::label_number_si(accuracy = 0.01)) +
coord_flip() +
scale_x_reordered() +
facet_wrap(~item, scales = 'free_x')
ticker_other_stat %>%
filter(return_annual_mean>0 & return_annual_median >0) %>%
select(-return_annual_sd) %>%
inner_join(symbol_load %>%
transmute(symbol, company_name, a_market_cap = market_cap,
b_last_annual_dividend = last_annual_dividend,
rowid,
row_group),
by = 'symbol') %>%
mutate(symbol_name = paste0(symbol, '_', company_name)) %>%
pivot_longer(cols = c(starts_with('return'), 'a_market_cap','b_last_annual_dividend'), names_to = 'item') %>%
filter(row_group == 1) %>%
group_by(item) %>%
arrange(desc(value)) %>%
ungroup() %>%
mutate(n = row_number(),
item = as.factor(item)) %>%
mutate(symbol = reorder_within(symbol, by = n, within = item)) %>%
ggplot(aes(x= fct_reorder(symbol, desc(n)), y = value)) +
geom_bar(stat = 'identity') +
scale_y_continuous(labels = scales::label_number_si(accuracy = 0.01)) +
coord_flip() +
scale_x_reordered() +
facet_wrap(~item, scales = 'free_x')
ticker_other_stat %>%
filter(return_annual_mean>0 & return_annual_median >0) %>%
select(-return_annual_sd) %>%
inner_join(symbol_load %>%
transmute(symbol, company_name, a_market_cap = market_cap,
b_last_annual_dividend = last_annual_dividend,
rowid,
row_group),
by = 'symbol') %>%
mutate(symbol_name = paste0(symbol, '_', company_name)) %>%
pivot_longer(cols = c(starts_with('return'), 'a_market_cap','b_last_annual_dividend'), names_to = 'item') %>%
filter(row_group == 1) %>%
group_by(item) %>%
arrange(desc(value)) %>%
ungroup() %>%
mutate(n = row_number(),
item = as.factor(item)) %>%
mutate(symbol = reorder_within(symbol, by = n, within = item)) %>%
ggplot(aes(x= fct_reorder(symbol, desc(n)), y = value)) +
geom_bar(stat = 'identity') +
scale_y_continuous(labels = scales::label_number_si(accuracy = 0.01)) +
coord_flip() +
scale_x_reordered() +
facet_wrap(~item, scales = 'free')
ticker_other_stat %>%
filter(return_annual_mean>0 & return_annual_median >0) %>%
select(-return_annual_sd) %>%
inner_join(symbol_load %>%
transmute(symbol, company_name, a_market_cap = market_cap,
b_last_annual_dividend = last_annual_dividend,
rowid,
row_group),
by = 'symbol') %>%
mutate(symbol_name = paste0(symbol, '_', company_name)) %>%
pivot_longer(cols = c(starts_with('return'), 'a_market_cap','b_last_annual_dividend'), names_to = 'item') %>%
filter(row_group == 0) %>%
group_by(item) %>%
arrange(desc(value)) %>%
ungroup() %>%
mutate(n = row_number(),
item = as.factor(item)) %>%
mutate(symbol = reorder_within(symbol, by = n, within = item)) %>%
ggplot(aes(x= fct_reorder(symbol, desc(n)), y = value)) +
geom_bar(stat = 'identity') +
scale_y_continuous(labels = scales::label_number_si(accuracy = 0.01)) +
coord_flip() +
scale_x_reordered() +
facet_wrap(~item, scales = 'free')
ticker_other_stat %>%
filter(return_annual_mean>0 & return_annual_median >0) %>%
select(-return_annual_sd) %>%
inner_join(symbol_load %>%
transmute(symbol, company_name, a_market_cap = market_cap,
b_last_annual_dividend = last_annual_dividend,
rowid,
row_group),
by = 'symbol') %>%
mutate(symbol_name = paste0(symbol, '_', company_name)) %>%
pivot_longer(cols = c(starts_with('return'), 'a_market_cap','b_last_annual_dividend'), names_to = 'item') %>%
filter(row_group == 2) %>%
group_by(item) %>%
arrange(desc(value)) %>%
ungroup() %>%
mutate(n = row_number(),
item = as.factor(item)) %>%
mutate(symbol = reorder_within(symbol, by = n, within = item)) %>%
ggplot(aes(x= fct_reorder(symbol, desc(n)), y = value)) +
geom_bar(stat = 'identity') +
scale_y_continuous(labels = scales::label_number_si(accuracy = 0.01)) +
coord_flip() +
scale_x_reordered() +
facet_wrap(~item, scales = 'free')
ticker_other_stat %>%
filter(return_annual_mean>0 or return_annual_median >0) %>%
ticker_other_stat %>%
filter(return_annual_mean>0 | return_annual_median >0) %>%
select(-return_annual_sd) %>%
inner_join(symbol_load %>%
transmute(symbol, company_name, a_market_cap = market_cap,
b_last_annual_dividend = last_annual_dividend,
rowid,
row_group),
by = 'symbol') %>%
mutate(symbol_name = paste0(symbol, '_', company_name)) %>%
pivot_longer(cols = c(starts_with('return'), 'a_market_cap','b_last_annual_dividend'), names_to = 'item') %>%
filter(row_group == 2) %>%
group_by(item) %>%
arrange(desc(value)) %>%
ungroup() %>%
mutate(n = row_number(),
item = as.factor(item)) %>%
mutate(symbol = reorder_within(symbol, by = n, within = item)) %>%
ggplot(aes(x= fct_reorder(symbol, desc(n)), y = value)) +
geom_bar(stat = 'identity') +
scale_y_continuous(labels = scales::label_number_si(accuracy = 0.01)) +
coord_flip() +
scale_x_reordered() +
facet_wrap(~item, scales = 'free')
ticker_other_stat %>%
filter(return_annual_mean>0 | return_annual_median >0) %>%
select(-return_annual_sd) %>%
inner_join(symbol_load %>%
transmute(symbol, company_name, a_market_cap = market_cap,
b_last_annual_dividend = last_annual_dividend,
rowid,
row_group),
by = 'symbol') %>%
mutate(symbol_name = paste0(symbol, '_', company_name)) %>%
pivot_longer(cols = c(starts_with('return'), 'a_market_cap','b_last_annual_dividend'), names_to = 'item') %>%
filter(row_group == 1) %>%
group_by(item) %>%
arrange(desc(value)) %>%
ungroup() %>%
mutate(n = row_number(),
item = as.factor(item)) %>%
mutate(symbol = reorder_within(symbol, by = n, within = item)) %>%
ggplot(aes(x= fct_reorder(symbol, desc(n)), y = value)) +
geom_bar(stat = 'identity') +
scale_y_continuous(labels = scales::label_number_si(accuracy = 0.01)) +
coord_flip() +
scale_x_reordered() +
facet_wrap(~item, scales = 'free')
ticker_other_stat %>%
filter(return_annual_mean>0 | return_annual_median >0) %>%
select(-return_annual_sd) %>%
inner_join(symbol_load %>%
transmute(symbol, company_name, a_market_cap = market_cap,
b_last_annual_dividend = last_annual_dividend,
rowid,
row_group),
by = 'symbol') %>%
mutate(symbol_name = paste0(symbol, '_', company_name)) %>%
pivot_longer(cols = c(starts_with('return'), 'a_market_cap','b_last_annual_dividend'), names_to = 'item') %>%
filter(row_group == 0) %>%
group_by(item) %>%
arrange(desc(value)) %>%
ungroup() %>%
mutate(n = row_number(),
item = as.factor(item)) %>%
mutate(symbol = reorder_within(symbol, by = n, within = item)) %>%
ggplot(aes(x= fct_reorder(symbol, desc(n)), y = value)) +
geom_bar(stat = 'identity') +
scale_y_continuous(labels = scales::label_number_si(accuracy = 0.01)) +
coord_flip() +
scale_x_reordered() +
facet_wrap(~item, scales = 'free')
ticker_other_stat %>%
filter(symbol %in% c('MOO', 'JJA', 'XLE', 'DBE')) %>%
# filter(return_annual_mean>0 | return_annual_median >0) %>%
# filter(row_group == 0) %>%
select(-return_annual_sd) %>%
inner_join(symbol_load %>%
transmute(symbol, company_name, a_market_cap = market_cap,
b_last_annual_dividend = last_annual_dividend,
rowid,
row_group),
by = 'symbol') %>%
mutate(symbol_name = paste0(symbol, '_', company_name)) %>%
pivot_longer(cols = c(starts_with('return'), 'a_market_cap','b_last_annual_dividend'), names_to = 'item') %>%
group_by(item) %>%
arrange(desc(value)) %>%
ungroup() %>%
mutate(n = row_number(),
item = as.factor(item)) %>%
mutate(symbol = reorder_within(symbol, by = n, within = item)) %>%
ggplot(aes(x= fct_reorder(symbol, desc(n)), y = value)) +
geom_bar(stat = 'identity') +
scale_y_continuous(labels = scales::label_number_si(accuracy = 0.01)) +
coord_flip() +
scale_x_reordered() +
facet_wrap(~item, scales = 'free')
ticker_other_stat %>%
filter(symbol %in% c('MOO', 'JJA', 'XLE', 'DBE')) %>%
# filter(return_annual_mean>0 | return_annual_median >0) %>%
# filter(row_group == 0) %>%
select(-return_annual_sd) %>%
inner_join(symbol_load %>%
transmute(symbol, company_name, a_market_cap = market_cap,
b_last_annual_dividend = last_annual_dividend,
rowid,
row_group),
by = 'symbol') %>%
mutate(symbol_name = paste0(symbol, '_', company_name)) %>%
pivot_longer(cols = c(starts_with('return'), 'a_market_cap','b_last_annual_dividend'), names_to = 'item') %>%
group_by(item) %>%
arrange(desc(value)) %>%
ungroup() %>%
mutate(n = row_number(),
item = as.factor(item)) %>%
mutate(symbol = reorder_within(symbol, by = n, within = item)) %>%
ggplot(aes(x= fct_reorder(symbol_name, desc(n)), y = value)) +
geom_bar(stat = 'identity') +
scale_y_continuous(labels = scales::label_number_si(accuracy = 0.01)) +
coord_flip() +
scale_x_reordered() +
facet_wrap(~item, scales = 'free')
ticker_other_stat %>%
filter(symbol %in% c('MOO', 'JJA', 'XLE', 'DBE')) %>%
# filter(return_annual_mean>0 | return_annual_median >0) %>%
# filter(row_group == 0) %>%
select(-return_annual_sd) %>%
inner_join(symbol_load %>%
transmute(symbol, company_name, a_market_cap = market_cap,
b_last_annual_dividend = last_annual_dividend,
rowid,
row_group),
by = 'symbol') %>%
mutate(symbol_name = paste0(symbol, '_', company_name)) %>%
pivot_longer(cols = c(starts_with('return'), 'a_market_cap','b_last_annual_dividend'), names_to = 'item') %>%
group_by(item) %>%
arrange(desc(value)) %>%
ungroup() %>%
mutate(n = row_number(),
item = as.factor(item)) %>%
mutate(symbol_name = reorder_within(symbol_name, by = n, within = item)) %>%
ggplot(aes(x= fct_reorder(symbol_name, desc(n)), y = value)) +
geom_bar(stat = 'identity') +
scale_y_continuous(labels = scales::label_number_si(accuracy = 0.01)) +
coord_flip() +
scale_x_reordered() +
facet_wrap(~item, scales = 'free') +
)
ticker_other_stat %>%
filter(symbol %in% c('MOO', 'JJA', 'XLE', 'DBE')) %>%
# filter(return_annual_mean>0 | return_annual_median >0) %>%
# filter(row_group == 0) %>%
select(-return_annual_sd) %>%
inner_join(symbol_load %>%
transmute(symbol, company_name, a_market_cap = market_cap,
b_last_annual_dividend = last_annual_dividend,
rowid,
row_group),
by = 'symbol') %>%
mutate(symbol_name = paste0(symbol, '_', company_name)) %>%
pivot_longer(cols = c(starts_with('return'), 'a_market_cap','b_last_annual_dividend'), names_to = 'item') %>%
group_by(item) %>%
arrange(desc(value)) %>%
ungroup() %>%
mutate(n = row_number(),
item = as.factor(item)) %>%
mutate(symbol_name = reorder_within(symbol_name, by = n, within = item)) %>%
ggplot(aes(x= fct_reorder(symbol_name, desc(n)), y = value)) +
geom_bar(stat = 'identity') +
scale_y_continuous(labels = scales::label_number_si(accuracy = 0.01)) +
coord_flip() +
scale_x_reordered() +
facet_wrap(~item, scales = 'free') +
labs(y = NULL,
x = 'symbol_name',
title = "over 5 years")
